<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ú–∞–≥–∞–∑–∏–Ω</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
</head>
<body>
    <h1>–ò–Ω—Ç–µ—Ä–Ω–µ—Ç-–º–∞–≥–∞–∑–∏–Ω</h1>
    <p id="user-info">–ó–∞–≥—Ä—É–∑–∫–∞...</p>
    
    <!-- –ö–Ω–æ–ø–∫–∞ –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –¥–∞–Ω–Ω—ã—Ö –±–æ—Ç—É -->
    <button id="send-data">üì® –û—Ç–ø—Ä–∞–≤–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –±–æ—Ç—É</button>

    <script>
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Telegram WebApp
        let tg = window.Telegram.WebApp;
        tg.expand();

        // –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
        let user = tg.initDataUnsafe?.user;
        document.getElementById('user-info').innerText = 
            user ? `–ü—Ä–∏–≤–µ—Ç, ${user.first_name}!` : '–ü—Ä–∏–≤–µ—Ç, –≥–æ—Å—Ç—å!';

        // –û–ë–†–ê–ë–û–¢–ß–ò–ö –ö–ù–û–ü–ö–ò ‚Äî –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π ID!
        document.getElementById('send-data').onclick = function() {
            // –§–æ—Ä–º–∏—Ä—É–µ–º —Ç–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ
            let testData = {
                action: 'test',
                message: '–ö–Ω–æ–ø–∫–∞ –Ω–∞–∂–∞—Ç–∞!',
                user_id: user?.id,
                username: user?.username
            };
            
            // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –±–æ—Ç—É
            tg.sendData(JSON.stringify(testData));
            
            // –ó–∞–∫—Ä—ã–≤–∞–µ–º WebApp
            tg.close();
        };
    </script>
</body>
</html>