<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Магазин</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
</head>
<body>
    <h1>Интернет-магазин</h1>
    <p id="user-info">Загрузка...</p>
    <button id="send-data">Отправить данные боту</button>

    <script>
        let tg = window.Telegram.WebApp;
        tg.expand(); // развернуть на весь экран

        // Получаем информацию о пользователе
        let user = tg.initDataUnsafe?.user;
        document.getElementById('user-info').innerText = 
            user ? `Привет, ${user.first_name}!` : 'Привет, гость!';

        // Кнопка отправки данных
        document.getElementById('checkout').onclick = function() {
            let tg = window.Telegram.WebApp;
            let order = {
                user: tg.initDataUnsafe?.user,
                cart: cart,
                total: document.getElementById('total').innerText,
                initData: tg.initData   // ← добавили строку initData
            };
            tg.sendData(JSON.stringify(order));
            tg.close();
        };
    </script>
</body>
</html>